import React, { Component } from 'react'
import { connect } from 'react-redux'
//import Paper from 'material-ui/Paper';

import {
    getTotalBasketCount,
    getTotalBasketPrice,
    getBasketPizzaWithoutCount
} from 'selectors'

import { browserHistory } from 'react-router'
import IconButton from 'material-ui/IconButton';
import { removePizzaFromBasketByIndex } from 'actions'
// const style = {
//     width: 200,
//     margin: 20,
//     textAlign: 'center',
//     display: 'inline-block',
//     right: 0,
//     fontSize: '14',
//     position: 'fixed'
// };

class BasketCart extends Component {
    render() {
        var style = window.screen.availWidth > 1000 ? { width: 230, marginTop: 130, marginLeft: '80%', position: 'absolute' } : { width: 230, zIndex: 2000, marginTop: 68, marginLeft: '80%' }

        const { removePizzaFromBasketByIndex, totalPrice, pizza } = this.props;
        return (
            <div className="panel panel-default" style={style}>
                <div className="panel-body">
                    {totalPrice > 0 &&
                        <div className="cart__body">
                            {
                                pizza.map((item, index) => (
                                    <div className="cart-item" key={index} >
                                        <IconButton onClick={() => removePizzaFromBasketByIndex(index)}>
                                            <svg fill="red" height="14" viewBox="0 0 24 24" width="14" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M22.73 22.73L2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24l1.27-1.27zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2H7.42zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54l9.01 9zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2z" />
                                                <path d="M0 0h24v24H0z" fill="none" />
                                            </svg>
                                        </IconButton>
                                        <span className="cart-item__name">{item.name}</span>
                                        <div className="cart-item__price">{item.price} руб.</div>
                                    </div>
                                ))}
                        </div>
                    }
                    {totalPrice === 0 && (
                        <div className="alert alert-success"><svg fill="green" height="36" viewBox="0 0 24 24" width="36" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 0h24v24H0z" fill="none" />
                            <path d="M17.21 9l-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" />
                        </svg>
                            <span style={{ display: 'inlineBlock', position: 'absolute', marginLeft: 30, marginTop: 15, fontSize: 14 }}>Корзина пуста</span>
                        </div>
                    )}
                    {totalPrice > 0 && (
                        <div className="cart__total">
                            <div onClick={() => browserHistory.push('/basket')} style={{ display: 'inlineBlock', verticalAlign: 'bottom', cursor: 'pointer' }}>
                                <span >
                                    <svg fill="green" height="20" viewBox="0 0 24 24" width="32" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" />
                                        <path d="M0 0h24v24H0z" fill="none" />
                                    </svg></span><span style={{ display: 'inlineBlock', verticalAlign: 'top' }} onClick={() => browserHistory.push('/basket')}  >{totalPrice} руб.</span>
                            </div>
                        </div>
                    )}

                </div>
            </div>
        )
    }
}


const mapDispatchToProps = {
    removePizzaFromBasketByIndex
}

const mapStateToProps = state => ({
    totalBasketCount: getTotalBasketCount(state),
    totalPrice: getTotalBasketPrice(state),
    pizza: getBasketPizzaWithoutCount(state)
})

export default connect(mapStateToProps, mapDispatchToProps)(BasketCart)
