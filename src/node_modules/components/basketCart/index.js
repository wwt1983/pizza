import React from 'react'
import {Link} from 'react-router'
import {connect} from 'react-redux'

import {
    getTotalBasketCount,
    getTotalBasketPrice,
    getBasketPizzaWithoutCount
} from 'selectors'

const BasketCart = ({pizza, totalBasketCount, totalPrice}) => (
    <div>
        <h3>Корзина</h3>
        <div className="cart">
            <div className="panel panel-default">
                <div className="panel-body">
                    {totalPrice > 0 &&
                    <div className="cart__body">
                        {  console.log('ppp ' + pizza)}
                        {
                            pizza.map((item, index) => (
                                <div className="cart-item" key={index}>
                                    <div>
                                        <button className="btn btn-danger btn-xs" >X</button>
                                        <span className="cart-item__name">{item.name}</span>
                                    </div>
                                    <div className="cart-item__price">{item.price} руб.</div>
                                </div>
                            ))}
                    </div>
                    }
                    {totalPrice === 0 && (
                        <div className="alert alert-info">Корзина пуста</div>
                    )}
                    {totalPrice > 0 && (
                        <div className="cart__total">
                            Сумма: {totalPrice} руб.
                        </div>
                    )}
                </div>
            </div>
        </div>
    </div>

)


const mapStateToProps = state => ({
    totalBasketCount : getTotalBasketCount(state),
    totalPrice : getTotalBasketPrice(state),
    pizza: getBasketPizzaWithoutCount(state)
})

export default connect(mapStateToProps, null) (BasketCart)
